# 데이터베이스 암호화 기술
* DB의 데이터를 암호화하는 방식은 일반적으로 "컬럼 암호화 방식" 과 "블록 암호화 방식"으로 구분할 수 있다. 
  * 컬럼 암호화 방식: 테이블의 컬럼 단위로 데이터를 암호화하여 저장하는 방식
  * 블록 암호화 방식: DBMS 블록 또는 파일 블록 단위로 암호화하여 저장하는 방식
* 컬럼 암호화 방식은 암복호화 모듈의 위치와 암복호화 모듈의 요청 위치의 조합에 따라 API 방식, Plug-In방식 및 Hybrid 방식 등이 있고 블록 암호화 방식은 TDE 방식, 파일 암호화 방식 등이 있다. 
## 컬럼 암호화 방식

### API 방식: 응용 프로그램 자체 암호화 방식
* 암복호화 모듈이 API 라이브러리 형태로 각 애플리케이션 서버에 설치되어 응용 프로그램에서 해당 암복호화 모듈을 호출하는 방식으로 애플리케이션 서버와 DB 서버 간의 통신에서 암호화된 데이터 전송을 보장할 수 있다. 
* DB서버에 영향을 주지 않아 DB 성능 저하가 적은 편이지만 구축시 응용 프로그램 전체 또는 일부 수정이 필요하다. 따라서 기존 운영 중인 시스템에 적용하기보다는 차세대 시스템 개발 등 기존 애플리케이션에 대한 전면적인 수정이 가능한 경우 적용하면 효과적이다. 

### Plug-In  방식
* 암복호화 모듈이 DB 서버에 설치되고 DB 서버에서 플러그린으로 연결된 암복호화 모듈을 호출하는 방식이다. 
* 구축 시 응용 프로그램의 수정을 최소화할 수 있으나 기존 DB 스키마와 대응하는 뷰를 생성하고 암호화할 테이블을 추가하는 등의 작업이 필요하다. 
  * 플러그인 방식의 구성에서 테이블/컬럼을 암호화하게 되면 기존 테이블 이름과 동일한 뷰와 변경된 이름의 암호화된 테이블이 생성되고 암호화 전 원본 테이블은 삭제하게 된다. 
  * 뷰는 암호화된 테이블에 저장된 데이터를 복호화해서 보여주는 통로 역할을 수행하고 데이터 변경이 발생하는 DML 요청이 발생하면 트리커를 통해 암호화하여 암호화된 테이블에서 처리한다. 기존 테이블 명과 동일한 일므으로 뷰를 생성하기 때문에 원본 테이블을 사용하던 기존 애플리케이션의 질의 변경을 최소화할 수 있다. 
* DB 서버에서 암복호화 모듈을 플러그인으로 호출할 때 추가적인 부하가 발생하여 성능이 저하될 수 있으므로 트랜잭션 처리량이 많지 않아 성능에 대한 민감성이 낮은 시스템에 적용하기 적합한 방식이다. 

### 혼합방식
* 대용량 트랜잭션 처리(배치 업무 등)와 같이 Plug-In 방식을 사용하면 성능 저하가 발생할 수 있는 부분은 API 방식을 사용하여 최적의 성능을 보장하도록 하고, 나머지 부분들은 Plug-In 방식을 사용하여 애플리케이션의 수정을 최소화하는 방식을 말한다. 



### 컬럼 암호화 방식의 특징 및 장단점 비교


|구분|특징|장점|단점|
|--|--|--|--|
|API| 애플리케이션 소스를 통해 암복호화 수행|•암복호화 속도가 빠르다(대용량 트랜잭션 처리에 적합)<br>•암복호화 과정이 애플리케이션 서버에서 수행되므로 DBMS 부하가 적다<br>•암호화 구간이 길다| •애플리케이션 변경에 따른 개발 비용 발생<br>•적용된 애플리케이션(미들웨어)의 패치에 영향을 받음|
|Plug-In|DBMS 내 Plug-In 형태 모듈을 적용하여 암복호화 수행|•애플리케이션 변경 최소화 |•대용량 처리 시 암 복호화 처리에 따른 DB서버의 부하가 크다<br>•DBMS의 패치에 영향을 받음<br>•암호화 구간이 짧다|



## 블럭 암호화 방식
### TDE(Transparent Data Encryption) 방식: DBMS 자체 암호화 방식
* DBMS에 내장된 암호화 기능을 이용하여 DB 내부에서 데이터 파일 저장 시 암호화하고 파일에 저장된 내용을 메모리 영역으로 가져올 때 DBMS에 의해 자동으로 복호화되는 방식이다. 
* DBMS 커널 수준에서 처리되므로 기존 응용 프로그램의 수정이나 DB 스키마의 변경이 거의 필요하지 않고 DBMS 엔진에 최적화된 성능을 제공할 수 있다. 
* DBMS 종류 및 버전에 따라 기능 지원 여부가 결정된다. 


### 파일 암호화 방식 : 운영체제 암호화 방식
* 파일 암호화는 운영체제에서 파일을 암호화하는 방식으로 파일에 대해 직접 암호화를 수행하므로 DB파일뿐만 아니라 로그파일, 이미지 파일, 음성/영상 등의 다양한 비정형 데이터에 대한 암호화 적용이 가능하다. 
* 응용 프로그램이나 DB 스키마 수정이 필요하지 않으며 거의 모든 DBMS에서 적용할 수 있는 장점이 있지만 파일 전체를 암호화하는 데 따른 DB 서버에 추가적인 부하가 발생할 수 있으며 운영체제에 따라 지원 여부가 달라질 수 있다. 









