# 서비스 거부 (DoS: Denial of Service) 공격
* 서비스 거부 공격은 공격 대상 시스템이 정상적인 서비스를 할 수 없도록 서비스를 마비시키는 형태의 공격을 말한다. 따라서 서비스 거부 공격은 공격대상 시스템의 서비스 가용성을 떨어트리는 것이 공격 목적이다. 
* 서비스 거부 공격은 크게 다음 3가지 유형으로 구분할 수 있다. 
  * 파괴공격: 디스크, 데이터, 시스템 파괴
  * 시스템 자원 소진 공격: CPU, 메모리, 디스크 등의 자원에 과도한 부하를 발생시키는 유형
  * 네트워크 소진 공격: 과도한 트랙픽으로 네트워크 대역폭을 소진시키는 유형
* 서비스 거부 공격과 분산 서비스 공격의 차이점
  * 서비스 거부 공격: 공격자가 단일 컴퓨터를 이용하여 공격하는 형태
  * 분산 서비스 거부 공격: 공격자가 분산된 다수의 컴퓨터(좀비PC) 또는 장치를 이용하여 공격하는 형태

# Ping Of Death Attack
<!-- # Ping Of Death Attack 이미지 -->
* `ping` 명령을 통해 ICMP 패킷을 정상적인 크기보다 아주 크게 만들어 전송하면 MTU에 의해 다수의 IP 단편화가 발생한다. 
  * MTU는 물리적인 네트워크 프로토콜(Network Interface 계층) 프레임의 데이터부 최대 크기를 의미한다. 
  * 이더넷의 경우 1500byte, 즉 IP 패킷의 최대 크기가 1500 byte 이기 때문에 IP헤더부를 제외하면 ICMP 패킷은 최대 1480byte의 크기로 생성된다. 
* 수신 측에서는 단편화된 패킷을 재조합하는 과정에서 많은 부하가 발생하거나, 재조합 버퍼의 오버플로우가 발생하여 정상적인 서비스를 하지 못하도록 한다. 

### 대응책
* Ping of Death 공격의 핵심은 Ping 패킷의 데이터 크기를 매우 크게하여 패킷을 몇 개만 보내도 수십개로 분할하여 목적지로 전송되는 것이다. 보통의 ICMP 패킷은 분할하지 않으므로 패킷 중 분할이 일어난 패킷 공격으로 의심하여 탐지하는 방식을 사용한다. 
* 현재 대부분의 시스템의 Ping Of Death 공격을 받을 때 반복적으로 들어오는 일정 수 이상의 ICMP 패킷을 무시하게 설정되어 있다. 만약 여전히 취약점을 가지고 있다면 패치가 필요하다. 

# Land Attack
<!-- # Land Attack이미지 -->
* land 는 착륙하다, 나쁜 상태에 빠지게 한다는 의미가 있다. 따라서 해당 시스템을 나쁜 상태에 빠지게 하는 도스 공격 기법이라고 할 수 있다. 
* 공격자가 출발지와 목적지 IP가 같은 패킷을 만들어 공격 대상 시스템에 보냄으로써 수신자가 자기 자신에게 응답을 보내 무한 루프 상태에 빠지도록 하여 시스템 자원을 소모시키는 형태의 도스 공격을 말한다. 

### 대응책
* 현재 대부분의 운영체제(OS)는 Land Attack에 대한 보안 패치가 적용되어 있다. 미적용 운영체제라면 보안 패치를 적용한다. 
  * 패치 적용 시 출발지와 목적지 IP 주소가 동일한 패킷의 경우 모두 폐기(Drop)처리한다. 
* 침입 차단 시스템(방화벽), 라우터 등 패킷 필터링 장비를 통해 출발지 IP와 목적지 IP가 같으면 차단하도록 설정한다. 


# Smurt Attack
<!-- # Smurt Attack이미지 -->
* 스머프 공격은 출발지 IP를 희생자 IP로 위조한 후 증폭 네트워크로 ICMP Echo Request를 브로드 캐스트함으로써, 다수의 ICMP Echo Reply가 희생자에게 전달되어 서비스 거부를 유발시키는 공격 기법이다. 
* Directed Broadcast
    * IP 주소의 호스트 ID 비트를 모두 1로 설정하여 브로트캐스트 하는 방식을 Directed Broadcast 라고 한다. 
    * 원격지 네트워크에 broadcast 해야 할 경우에 원격지 주소의 호스트 ID 비트를 모두 1로 설정하여 전송하게 된다. 이때 원격지 라우터의 Directed Broadcast가 활성화되어야 가능한데 일반적으로 보안상의 문제로 허용하지 않는다. 
* Amplifier(Bounce) Network(증폭 네트워크)
  * ICMP Echo Request 브로트캐스트 메시지를 받아서 희생자에게 다수의/증폭된 ICMP Echo Reply를 전송하는 네트워크를 말한다. 

### 대응책
* 스머프 공격의 특성상 공격이 시작되면 단시간에 다수의 ICMP Echo Reply 패킷을 희생자에게 전송한다. 따라서 동일한 ICMP Echo Reply 패킷이 다량으로 발생한다면 해당 패킷들을 침입차단시스템으로 모두 차단(Drop)시킨다. 
* 증폭네트워크로 사용되는 것을 막기 위해 다른 네트워크로부터 자신의 네트워크로 들어오는 Directed Broadcast 패킷을 허용하지 않도록 라우터 설정을 한다. 
* 브로드캐스트 주소로 전송된 ICMP Echo Request 메시지에 대해 응답하지 않도록 시스템 설정을 한다. 




# Teardrop Attack
<!-- # Teardrop Attack 이미지-->
* IP 패킷의 재조합 과정에서 조작된 단편의 오프셋 정보로 인해 수신시스템에 오류나 부하가 발생하도록 만드는 도스 공격이다. 
* 공격자는 IP fragment offset값을 서로 중첩되도록 조작하여 전송하고 이를 수신한 시스템이 재조합 하는 과정에서 오류나 부하가 발생한다. 시스템의 기능을 마비시키는 방식이다. 
* 패킷의 fragment관련 헤더 값을 조작하는 유사한 공격으로 Bonk, Boink 가 있다. 

### 대응책
* OS의 보안패치를 모두 적용하여 OS의 취약점을 해소한다. 

# IP 단편화 취약점을 이용한 우회 공격
* IP 단편화의 취약점을 이용하여 패킷 필터링 장비(방화벽, 침입탐지시스템 등)를 우회하기 위한 대표적인 공격 기법에는 "Tiny Fragment(작은 단편) 공격" 과 "Fragment Overlap(단편 중첩) 공격"이 있다. 
* Teardrop 공격처럼 IP 단편의 오프셋을 조작하는 공격이지만 도스공격이 아닌 침입차단시스템(방화벽)등을 우회하여 허용하지 않는 대상 시스템의 서비스에 접근하기 위한 공격이다. 

### Tiny Fragment(작은 단편) 공격
<!-- Tiny Fragment(작은 단편) 공격 이미지 -->
* TCP/UDP 헤더가 2개의 IP 단편에 나누어질 정도로 최초의 단편을 아주 작게 만들어서 패킷 필터링 장비를 우회하는 공격 기법을 말한다. 
##### 공격원리
* 공격자는 TCP/UDP 헤더가 2개의 IP 단편에 나누어질 정도로 작게 쪼개서 첫번째 단편에는 목적지 포트가 포함되지 않고, 두 번째 단편에 포함되도록 한다. 
* 패킷 필터링 장비는 첫번째 IP 단편에 필터링할 정보(목적지 포트 정보)가 없어 통과시키고 이후 두번째 단편은 첫 번째 단편이 허용되었으므로 통과시킨다. 
* 목적지 서버에서 단편들이 재조합되어 공격자가 원하는 포트로 연결된다. 

### Fragment Overlap(단편 중첩) 공격
<!-- # Fragment Overlap(단편 중첩) 공격 이미지 -->
* IP 단편의 오프셋을 조작하여 첫 번째 단편의 일부분을 두 번째 단편이 덮어쓰도록 하여 패킷 필터링 장비를 우회하는 공격기법이다. 
##### 공격원리
* 공격자는 두 개의 IP 단편을 생성한 후 첫번째 단편에는 패킷 필터링 장비에서 허용하는 목적지포트(e.g. HTTP 80 포트)가 포함되도록 하고 두 번째 단편에는 공격자가 연결하기 원하는 목적지 포트(e.g. Telnet 23포트)가 포함되도록 한다. 
* 두번째 단편의 목적지 포트가 첫 번째 단편의 목적지 포트를 덮어쓸 수 있도록 두 번째 단편의 오프셋을 조작한다. 
* 패킷 필터링 장비는 첫 번째  IP 단편에 있는 허용하는 목적지 포트 정보를 확인한 후 통과시키고 이후 두번쨰 단편은 첫번째 단편이 허용되었으므로 통과시킨다. 
* 목적지 서버에서 단편들이 재조합되어 공격자가 원하는 목적지 포트로 연결된다. 
  
### 대응책
* 단편화된 패킷들을 재조합하여 IP 단편화를 이용한 우회 공격의 탐지가 가능한 패킷 필터링 장비(방화벽, 침입탐지시스템)를 적용한다. 




