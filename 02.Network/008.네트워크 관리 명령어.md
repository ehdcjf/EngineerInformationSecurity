# `ping`
* 종단(End) 노드 간에 네트워크 상태를 관리하기 위한 명령어
* Target 시스템에 대한 접근성, 해당 구간에 대한 네트워크 속도 및 품질(손실도)을 검사하기 위한 명령어
* ICMP Echo Request(Type:8)와 ICMP Echo Reply(Type:0) 메시지 이용

### 윈도우 `ping`
* 옵션 
  |||
  |--|--|
  |`-n`|패킷 전송 횟수 설정(default 4회)|
  |`-l`|패킷 크기(byte) 설정(default 32 bytes)|

### 리눅스 `ping`
* 옵션 
  |||
  |--|--|
  |`-c`|패킷 전송 횟수 설정(default 무한)|
  |`-s`|패킷 크기(byte) 설정(default 56 bytes)|


# `traceroute`/`tracert` 

* 종단(End) 노드 사이에 있는 여러 중계 노드(L3/라우터) 각 구간에 대한 네트워크 상태를 관리하기 위한 명령어로 네트워크의 라우팅 문제점을 찾아내는 목적으로 많이 사용한다. 
* 두 명령어의 동작 원리는 동일하지만 시스템에 따라 구현 방식에 차이가 있다. 
  * 유닉스/리눅스 계열의 `traceroute` 명령은 목적지 호스트 포트(33433/udp)로 UDP 패킷의 TTL 값을 1씩 증가시키면서 진단한다. 
  * 윈도우 계열의 `tracert` 명령은 목적지 호스트로 ICMP Echo Request 패킷의 TTL 값을 1씩 증가시키면서 진단한다. 
* 최종 목적지 노드에 도달하는데 경유하는 중계 노드(L3장비/라우터)의 개수, IP주소, 응답시간 등을 파악할 수 있다. 
* 각 구간에 대한 접근성 및 네트워크 속도를 검사한다. 

### 유닉스/리눅스 traceroute 동작 방식
1. 각 중계 노드(L3장비/라우터) 구간에 대한 상태를 측정하기 위해 IP의 TTL(Time To Live) 필드를 1로 설정한 UDP 패킷을 보낸다. 
  * 라우터는 패킷의 생존 기간을 계산하기 위해 패킷을 수신하면 TTL 값을 1 감소시킨 후 그 결과 0 이 되면 TTL 초과로 판단하여 해당 패킷을 폐기한 후 ICMP Time Exceeded(Type 11) 패킷을 최초 출발지로 보낸다. 
  * 따라서 TTL 값을 1 로 설정하면 첫 번째 라우터에서 패킷이 폐기되고 ICMP 응답이 오기 때문에 이를 이용하여 출발지 호스트와 첫번째 라우터 간의 네트워크 상태를 판단한다. 
  * 보안상의 이유로 라우터에서 ICMP 응답을 주지 않는 경우가 많다. traceroute 명령 수행 시 응답시간이 * 로 표시되는 경우 응답이 없는 경우로 보안상의 이유이거나 실제 해당 구간에 문제가 발생한 경우로 볼 수 있다. 
2. TTL 값을 1 씩 증가시키면서 UDP 패킷을 지속적으로 전송하여 다음 중계 구간에 대한 네트워크 상태를 판단한다. 
3. 최종 목적지에 UDP 패킷이 도달하면 해당 UDP 포트가 닫혀있으므로 ICMP Destination Unreachable(Type 3) 패킷이 반환되며 최초 출발지 호스트는 이 정보를 이용하여 최종 목적지 호스트에 도달했음을 알 수 있게 된다. 


### 윈도우 tracert 동작 방식
1. 각 중계노드(L3장비/라우터) 구간에 대한 상태를 측정하기 위해 IP의 TTL 필드를 1로 설정한 ICMP Echo Request(Type 8) 패킷을 보낸다. 
   * 라우터는 패킷의 생존 기간을 계산하기 위해 패킷을 수신하면 TTL 값을 1 감소시킨 후 그 결과 0이 되면 TTL 초과로 판단하여 해당 패킷을 폐기한 후 ICMP Time Exceeded(Type 11) 메시지를 최초 출발지로 보낸다. 
   * 따라서 TTL 값을 1로 설정하면 첫번쨰 라우터에서 패킷이 폐기되고 ICMP 응답이 오기 때문에 이를 이용하여 출발지 호스트와 첫번째 라우터 간의 네트워크 상태를 판단한다. 
   * 보안상의 이유로 라우터에서 ICMP 응답을 주지 않는 경우가 많다. traceroute 명령 수행 시 응답시간이 * 로 표시되는 경우 응답이 없는 경우로 보안상의 이유이거나 실제 해당 구간에 문제가 발생한 경우로 볼 수 있다. 
2. TTL 값을 1 씩 증가시키면서 UDP 패킷을 지속적으로 전송하여 다음 중계 구간에 대한 네트워크 상태를 판단한다. 
3. 최종 목적지에 ICMP Echo Request(Type 8)패킷이 도달하면 ICMP Echo Reply(Type 0) 패킷이 반환되며 최초 출발지 호스트는 이 정보를 이용하여 최종 목적지 호스트에 도달했음을 알 수 있게 된다. 


# `netstat`
* 시스템의 네트워크 관련 다양한 상태 정보를 관리할 수 있는 명령어
* 주요 제공 정보는 다음과 같다. 
  
  |||
  |:--:|--|
  | | 모든 연결된 소켓 상태 정보 |
  |`-a` | 모든 소켓 상태 정보 |
  |`-i` | 네트워크 인터페이스 정보 |
  |`-r` | 시스템 라우팅 테이블 정보 |
  |`-s` | 프로토콜별(TCP,UDP,ICMP,IP 등) 통계정보 |
  |`-t` | TCP 소켓 정보 |
  |`-u` | UDP 소켓 정보 |
  |`-n` | 네트워크 주소를 숫자 형식으로 출력하는 옵션 |
  |`-p` | 해당 소켓의 프로세스명/pid 정보를 출력하는 옵션이다. <br>TCP 소켓을 열고 있는 프로세스를 확인하는 데 유용하게 사용한다. |

* 각 필드의 의미는 다음과 같다. 
 
  |필드|설명|
  |--|--|
  | Proto| 사용한 프로토콜 종류 |
  | Recv-Q| 원격 호스트로부터 수신버퍼에 저장한 데이터 크기 |
  | Send-Q| 원격 호스트로 전송하기 위해 송신 버퍼에 저장한 데이터의 크기 |
  | Local Address| 로컬 호스트의 소켓 주소(IP: 포트 또는 서비스명) |
  | Foreign Address| 원격 호스트의 소켓 주소(IP: 포트) |
  | State | 소켓 상태 |
  
* 네트워크 인터페이스 정보 확인하기
  * RX는 수신한 패킷의 수
  * TX는 전송한 패킷의 수
  * OK: 오류 X
  * ERR: 오류 O
  * DRP: 폐기
  * OVR: 오버플로우 발생으로 폐기

# `ifconfig`
* 유닉스/리눅스 시스템에서 네트워크 인터페이스 설정 정보를 조회하거나 IP 주소나 서브넷 마스크 등의 설정을 변경할 때 사용
* `ifconfig 인터페이스명 promisc`: 인터페이스가 promiscuous 모드로 동작하면서 PROMISC 표시
* /var/log/messages(/var/log/syslog) 로그 파일에 인터페이스 promiscuous 모드로 전환된 내용이 나옴. 
* 외부 침입자에 의한 불법적인 스니핑 목적의 모드 전환이 발생할 수 있으므로 주의가 필요 
* `ifconfig 인터페이스명 -promisc` 으로 promiscuous 모드 설정 해제




  






